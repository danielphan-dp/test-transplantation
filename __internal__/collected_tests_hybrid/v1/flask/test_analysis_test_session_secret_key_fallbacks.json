{
  "test_name": "test_session_secret_key_fallbacks",
  "test_file": "__internal__/_data/flask/tests/test_basic.py",
  "static_methods": [
    {
      "name": "app.post",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    },
    {
      "name": "app.get",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    },
    {
      "name": "client.post",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    },
    {
      "name": "dict",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    },
    {
      "name": "client.get",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    },
    {
      "name": "client.get",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    },
    {
      "name": "client.get",
      "source_code": "",
      "file_path": "",
      "line_number": 0
    }
  ],
  "dynamic_methods": [
    {
      "function": "app.post",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    },
    {
      "function": "app.get",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    },
    {
      "function": "client.post",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    },
    {
      "function": "dict",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    },
    {
      "function": "client.get",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    },
    {
      "function": "client.get",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    },
    {
      "function": "client.get",
      "filename": "",
      "line": 0,
      "caller": "test_session_secret_key_fallbacks"
    }
  ],
  "assertions": [
    "assert client.get().json == {'a': 1}",
    "assert client.get().json == {}",
    "assert client.get().json == {'a': 1}"
  ],
  "mocks": [],
  "success": false,
  "test_source_code": "def test_session_secret_key_fallbacks(app, client) -> None:\n    @app.post(\"/\")\n    def set_session() -> str:\n        flask.session[\"a\"] = 1\n        return \"\"\n\n    @app.get(\"/\")\n    def get_session() -> dict[str, t.Any]:\n        return dict(flask.session)\n\n    # Set session with initial secret key\n    client.post()\n    assert client.get().json == {\"a\": 1}\n    # Change secret key, session can't be loaded and appears empty\n    app.secret_key = \"new test key\"\n    assert client.get().json == {}\n    # Add initial secret key as fallback, session can be loaded\n    app.config[\"SECRET_KEY_FALLBACKS\"] = [\"test key\"]\n    assert client.get().json == {\"a\": 1}"
}